<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-19RP0D764T"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-19RP0D764T');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Wallpaper Cup ‚Äì Hall of Fame | WallRank</title>
    
    <meta name="description" content="Daily wallpaper battle: 4 fresh AI images. Vote, download, play puzzle, view on 4 devices. New winner midnight UTC.">
    <meta name="keywords" content="daily wallpaper, vote wallpaper, download AI art, wallpaper ranking, daily cup, top wallpaper today, 4k free, daily challenge, wallpaper puzzle, 3d phone, 3d laptop, 3d monitor, 3d tablet">
    <meta name="author" content="wallrank.club">
    <link rel="canonical" href="https://wallrank.club">
    
    <meta property="og:title" content="Daily Wallpaper Cup ‚Äì Hall of Fame">
    <meta property="og:description" content="Every day: 4 fresh AI wallpapers. Vote, download, play puzzle, view on 3D devices. Winner crowned at midnight UTC.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wallrank.club">
    <meta property="og:image" content="https://wallrank.club/og-daily.jpg">
    <meta name="twitter:card" content="summary_large_image">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "WallRank Daily Cup",
      "url": "https://wallrank.club",
      "description": "A daily competition featuring 4 fresh AI-generated wallpapers. Users can vote, download, and play puzzles.",
      "applicationCategory": "MultimediaApplication",
      "genre": "Digital Art",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ---------- CORE MINIMAL CSS ---------- */
        :root {
            --bg-color: #f8fafc;
            --surface: #ffffff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border-light: #e2e8f0;
            --border-focus: #cbd5e1;
            --accent-subtle: #f1f5f9;
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 24px;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.05);
            --shadow-hover: 0 10px 25px rgba(0, 0, 0, 0.08);
            --transition-smooth: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-color);
            color: var(--text-main);
            padding: 32px 24px;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            position: relative;
        }
        @media (max-width: 550px) {
            body { padding: 16px 12px; }
        }
        
        /* SLEEK TOP BAR */
        .top-bar {
            display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            padding: 16px 24px; border-radius: var(--radius-lg); margin-bottom: 40px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-light);
            gap: 16px;
        }
        .button-group-top { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
        
        /* MINIMAL PROFESSIONAL BUTTONS */
        button, .btn {
            font-family: inherit;
            border: 1px solid var(--border-light);
            background: var(--surface);
            color: var(--text-main);
            font-weight: 600; font-size: 0.95rem;
            padding: 10px 20px; border-radius: var(--radius-sm);
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: var(--transition-smooth);
            min-height: 44px; /* Mobile accessible */
            box-shadow: var(--shadow-sm);
        }
        
        button:hover, .btn:hover {
            border-color: var(--border-focus);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }
        
        button:active, .btn:active {
            transform: scale(0.97);
            box-shadow: none;
        }

        /* Subtle accents for primary actions */
        .whats-this-btn { background: #f8fafc; }
        .ai-stock-btn { background: #f8fafc; }
        .share-site-btn { background: #0f172a; color: white; border-color: #0f172a; }
        .share-site-btn:hover { background: #1e293b; color: white; }
        
        .countdown-block {
            background: var(--accent-subtle);
            padding: 8px 20px; border-radius: var(--radius-md); font-weight: 600; display: flex; align-items: center; gap: 12px;
            border: 1px solid var(--border-light);
            flex-wrap: wrap; justify-content: center;
        }
        .countdown-number { background: var(--surface); color: var(--text-main); padding: 4px 12px; border-radius: var(--radius-sm); font-size: 1.2rem; font-weight: 700; font-variant-numeric: tabular-nums; border: 1px solid var(--border-light); box-shadow: var(--shadow-sm); }
        .winner-note { font-size: 0.9rem; color: var(--text-muted); font-weight: 600; }

        /* CLEAN VALUE PROP */
        .value-prop {
            background: var(--surface); border-radius: var(--radius-md); padding: 16px 28px; margin: 0 0 40px 0;
            text-align: center; border: 1px solid var(--border-light); box-shadow: var(--shadow-sm);
            font-size: 1.05rem; font-weight: 500; color: var(--text-muted); display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap;
        }
        .value-prop span { background: var(--text-main); color: white; padding: 4px 14px; border-radius: var(--radius-sm); font-size: 0.85rem; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase; }
        
        .daily-headline { text-align: center; margin-bottom: 40px; }
        .daily-headline h2 { font-size: 2rem; font-weight: 700; color: var(--text-main); letter-spacing: -0.02em; }
        .daily-headline p { font-size: 1.1rem; color: var(--text-muted); font-weight: 500; margin-top: 8px; }
        
        /* SLEEK WALLPAPER GRID */
        .wallpaper-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; margin: 0 0 40px 0; }
        @media (max-width: 900px) { .wallpaper-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 550px) { .wallpaper-grid { grid-template-columns: 1fr; gap: 20px; } }
        
        .wall-card { 
            background: var(--surface); border-radius: var(--radius-md); overflow: hidden; 
            border: 1px solid var(--border-light); box-shadow: var(--shadow-sm); 
            transition: var(--transition-smooth); display: flex; flex-direction: column; position: relative; 
        }
        .wall-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-hover); border-color: var(--border-focus); }
        
        /* Golden Leader - Refined */
        .wall-card.leader-gold { border: 1px solid #fbbf24; box-shadow: 0 8px 24px rgba(251, 191, 36, 0.15); }
        .wall-card.leader-gold .img-container::after { content: "üëë"; position: absolute; top: 12px; right: 12px; font-size: 1.8rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); z-index: 2; }
        
        .img-container { width: 100%; aspect-ratio: 4 / 5; background: var(--accent-subtle); position: relative; overflow: hidden; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        .wall-card:hover .img-container img { transform: scale(1.05); }
        
        .card-content { padding: 20px; display: flex; flex-direction: column; gap: 16px; }
        .wall-title { font-weight: 600; font-size: 1.1rem; color: var(--text-main); display: flex; align-items: center; gap: 6px; }
        
        .stats { display: flex; justify-content: space-between; color: var(--text-muted); font-weight: 500; font-size: 0.9rem; background: var(--accent-subtle); padding: 8px 12px; border-radius: var(--radius-sm); border: 1px solid var(--border-light); }
        .button-group { display: flex; gap: 8px; margin-top: 4px; flex-wrap: wrap; }
        
        .btn { flex: 1 1 auto; padding: 10px 0; }
        .btn-vote.clicked { background: var(--text-main); color: white; border-color: var(--text-main); }
        .btn-download.clicked { background: #10b981; color: white; border-color: #10b981; }
        
        /* PROFESSIONAL REACTIONS */
        .reaction-emoji { font-size: 2rem; position: absolute; pointer-events: none; animation: floatUpSleek 1s cubic-bezier(0.16, 1, 0.3, 1) forwards; z-index: 999; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); }
        @keyframes floatUpSleek { 
            0% { opacity: 0; transform: translateY(10px) scale(0.9); } 
            20% { opacity: 1; transform: translateY(0) scale(1.1); } 
            100% { opacity: 0; transform: translateY(-50px) scale(0.9); } 
        }
        
        /* MINIMAL SECTIONS */
        .winner-history-section, .blog-section, .winner-week-section { 
            margin-top: 40px; margin-bottom: 40px; background: var(--surface); 
            border-radius: var(--radius-md); padding: 32px; border: 1px solid var(--border-light); 
            box-shadow: var(--shadow-sm); 
        }
        .history-header, .blog-header, .winner-week-title { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
        .history-header h3, .blog-header h3, .winner-week-title h3 { font-size: 1.5rem; font-weight: 700; color: var(--text-main); letter-spacing: -0.01em; }
        .history-header span, .blog-header span, .winner-week-badge { background: var(--accent-subtle); padding: 4px 12px; border-radius: var(--radius-sm); font-size: 0.8rem; font-weight: 600; color: var(--text-muted); border: 1px solid var(--border-light); }
        
        .winners-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; }
        .winner-item { background: var(--surface); border-radius: var(--radius-sm); padding: 12px; border: 1px solid var(--border-light); transition: var(--transition-smooth); display: flex; flex-direction: column; align-items: center; text-align: center; }
        .winner-item:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); border-color: var(--border-focus); }
        .winner-thumb { width: 100%; aspect-ratio: 4 / 5; border-radius: 6px; overflow: hidden; margin-bottom: 12px; background: var(--accent-subtle); }
        .winner-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .winner-title { font-weight: 600; color: var(--text-main); margin-bottom: 4px; font-size: 0.95rem; }
        .winner-date { font-size: 0.75rem; color: var(--text-muted); font-weight: 500; }
        .empty-history { text-align: center; padding: 40px 20px; color: var(--text-muted); font-size: 1rem; border-radius: var(--radius-sm); border: 1px dashed var(--border-focus); grid-column: 1 / -1; }
        
        /* CLEAN FOOTER */
        .footer-links { margin-top: 60px; padding: 40px 0 20px; border-top: 1px solid var(--border-light); display: flex; flex-wrap: wrap; justify-content: center; gap: 24px; font-size: 0.9rem; width: 100%; }
        .footer-links a { text-decoration: none; color: var(--text-muted); font-weight: 500; transition: var(--transition-smooth); cursor: pointer; }
        .footer-links a:hover { color: var(--text-main); }
        .copyright { width: 100%; text-align: center; color: var(--text-muted); margin-top: 24px; font-size: 0.8rem; }
        
        .seo-hidden { position: absolute; left: -9999px; top: -9999px; height: 1px; width: 1px; overflow: hidden; }
        
        /* SLEEK MODALS / POPUPS */
        .info-popup { display: none; background: var(--surface); border: 1px solid var(--border-light); border-radius: var(--radius-md); padding: 32px; max-width: 450px; width: 90%; box-shadow: 0 20px 40px rgba(0,0,0,0.1); position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95); z-index: 3000; text-align: center; max-height: 85vh; overflow-y: auto; opacity: 0; transition: all 0.2s ease; }
        .info-popup.show { display: block; opacity: 1; transform: translate(-50%, -50%) scale(1); }
        .close-popup { float: right; font-size: 1.5rem; background: none; border: none; cursor: pointer; color: var(--text-muted); padding: 0; box-shadow: none; min-height: auto; }
        
        /* PUZZLE & OVERLAYS REFINED */
        .puzzle-launch { display: flex; justify-content: center; margin: 20px 0 40px; }
        .puzzle-btn { padding: 16px 32px; font-size: 1.1rem; }
        
        .puzzle-overlay, .devices-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(4px); z-index: 2000; display: none; justify-content: center; align-items: center; flex-direction: column; overflow-y: auto; padding: 20px; }
        .puzzle-overlay.active, .devices-overlay.active { display: flex; }
        
        .puzzle-card, .devices-container { background: var(--surface); border-radius: var(--radius-md); padding: 32px; max-width: 750px; width: 100%; border: 1px solid var(--border-light); box-shadow: 0 20px 40px rgba(0,0,0,0.15); text-align: center; position: relative; margin: auto; }
        .puzzle-title, .devices-title { font-size: 1.5rem; font-weight: 700; color: var(--text-main); margin-bottom: 20px; }
        
        .puzzle-thumb { width: 100px; height: 100px; border-radius: var(--radius-sm); border: 2px solid var(--border-light); cursor: pointer; transition: var(--transition-smooth); overflow: hidden; }
        .puzzle-thumb:hover { transform: scale(1.05); border-color: var(--text-main); }
        .puzzle-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; width: 360px; height: 360px; margin: 20px auto; background: var(--border-light); padding: 2px; border: 1px solid var(--border-light); border-radius: var(--radius-sm); }
        
        @media (max-width: 450px) {
            .puzzle-card, .devices-container { padding: 20px 16px; }
            .puzzle-grid { transform: scale(0.80); transform-origin: top center; margin-bottom: -50px; }
        }

        .puzzle-piece { width: 100%; height: 100%; background-color: var(--surface); border-radius: 4px; cursor: grab; transition: 0.05s; }
        .puzzle-piece:active { cursor: grabbing; }
        
        /* REFINED CELEBRATION */
        .celebration-8s { background: var(--text-main); padding: 20px; border-radius: var(--radius-md); font-size: 1.5rem; margin: 20px 0; color: white; font-weight: 600; letter-spacing: 2px; animation: gentlePulse 2s infinite alternate; }
        @keyframes gentlePulse { from { box-shadow: 0 0 10px rgba(15, 23, 42, 0.2); transform: scale(1); } to { box-shadow: 0 0 20px rgba(15, 23, 42, 0.4); transform: scale(1.02); } }
        
        .signature-input { border: 1px solid var(--border-focus); border-radius: var(--radius-sm); padding: 12px; font-size: 1rem; width: 80%; margin: 15px 0; text-align: center; font-family: inherit; }
        .signature-input:focus { border-color: var(--text-main); outline: none; }
        
        .social-icons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin: 20px 0; }
        .social-icon { background: var(--surface); padding: 12px; border-radius: 50%; font-size: 1.2rem; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--border-light); cursor: pointer; transition: var(--transition-smooth); }
        .social-icon:hover { background: var(--accent-subtle); border-color: var(--border-focus); transform: translateY(-2px); }
        
        /* 4 DEVICES CAROUSEL - Cleaned up */
        .carousel { position: relative; display: flex; align-items: center; justify-content: center; min-height: 500px; }
        .carousel-btn { background: var(--surface); border: 1px solid var(--border-light); color: var(--text-main); width: 40px; height: 40px; border-radius: 50%; font-size: 1.5rem; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: var(--transition-smooth); position: absolute; z-index: 10; box-shadow: var(--shadow-sm); }
        .carousel-prev { left: 0; }
        .carousel-next { right: 0; }
        .carousel-slide { display: none; flex-direction: column; align-items: center; gap: 20px; width: 100%; }
        .carousel-slide.active { display: flex; }
        .device-label { font-size: 1rem; font-weight: 600; color: var(--text-main); background: var(--accent-subtle); padding: 6px 16px; border-radius: var(--radius-sm); border: 1px solid var(--border-light); }
        
        /* Maintained your exact CSS device drawings but removed extreme external shadows */
        .device-phone { width: 240px; height: 480px; background: #1a1a1a; border-radius: 36px; padding: 10px; position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.2); border: 1px solid #333; }
        .phone-screen { width: 100%; height: 100%; background: black; border-radius: 28px; overflow: hidden; position: relative; }
        .phone-notch { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); width: 90px; height: 25px; background: #1a1a1a; border-radius: 20px; display: flex; justify-content: center; align-items: center; gap: 8px; z-index: 10; }
        .phone-camera { width: 8px; height: 8px; background: #222; border-radius: 50%; }
        .phone-speaker { width: 30px; height: 4px; background: #222; border-radius: 4px; }
        .phone-home-bar { position: absolute; bottom: 12px; left: 50%; transform: translateX(-50%); width: 100px; height: 4px; background: rgba(255,255,255,0.4); border-radius: 10px; }
        .side-button { position: absolute; right: -4px; width: 3px; height: 40px; background: #444; border-radius: 2px 0 0 2px; }
        .volume-up { top: 100px; } .volume-down { top: 160px; } .power { top: 280px; height: 50px; }
        
        .device-laptop { width: 380px; perspective: 1200px; }
        .laptop-body { background: #1a1a1a; border-radius: 12px 12px 0 0; padding: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .laptop-bezel { background: #0a0a0a; border-radius: 8px; padding: 6px; }
        .laptop-screen { background: black; border-radius: 4px; width: 100%; aspect-ratio: 16/10; overflow: hidden; position: relative; }
        .laptop-base { width: 100%; height: 16px; background: #2a2a2a; border-radius: 0 0 8px 8px; border-bottom: 2px solid #111; }
        
        .device-monitor { width: 380px; }
        .monitor-body { background: #1a1a1a; border-radius: 8px; padding: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .monitor-bezel { background: #0a0a0a; border-radius: 4px; padding: 6px; }
        .monitor-screen { background: black; border-radius: 2px; width: 100%; aspect-ratio: 16/9; overflow: hidden; }
        .monitor-stand { width: 60px; height: 40px; background: #2a2a2a; margin: 0 auto; }
        .monitor-base { width: 120px; height: 8px; background: #333; margin: 0 auto; border-radius: 4px; }
        
        .device-tablet { width: 280px; height: 380px; background: #1a1a1a; border-radius: 24px; padding: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); position: relative; }
        .tablet-bezel { background: #0a0a0a; border-radius: 16px; padding: 6px; height: 100%; }
        .tablet-screen { background: black; border-radius: 12px; width: 100%; height: 100%; overflow: hidden; position: relative; }
        .tablet-home-bar { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); width: 60px; height: 3px; background: rgba(255,255,255,0.4); border-radius: 10px; }
        
        .device-wallpaper { width: 100%; height: 100%; object-fit: cover; display: block; background-color: black; }
        .dots { display: flex; justify-content: center; gap: 8px; margin-top: 24px; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--border-light); cursor: pointer; transition: 0.2s; }
        .dot.active { background: var(--text-main); transform: scale(1.2); }
        
        @media (max-width: 700px) {
            .device-phone { width: 200px; height: 400px; }
            .device-laptop { width: 300px; }
            .device-monitor { width: 300px; }
            .device-tablet { width: 220px; height: 300px; }
        }

        /* AI GALLERY POPUP MINIMAL */
        .ai-gallery-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin: 20px 0; }
        .ai-gallery-item { background: var(--surface); border-radius: var(--radius-sm); padding: 8px; border: 1px solid var(--border-light); }
        .ai-gallery-item img { width: 100%; aspect-ratio: 4/5; object-fit: cover; border-radius: 4px; margin-bottom: 8px; }
        .ai-gallery-title { font-weight: 600; color: var(--text-main); font-size: 0.85rem; }
        @media (min-width: 550px) { .ai-gallery-grid { grid-template-columns: repeat(4, 1fr); } }
        
        /* BLOG CLEANUP */
        .blog-content { color: var(--text-muted); }
        .blog-highlight { background: var(--accent-subtle); padding: 20px; border-radius: var(--radius-sm); border-left: 4px solid var(--text-main); margin: 20px 0; color: var(--text-main); font-weight: 500; }
        
        /* WINNER OF THE WEEK CLEANUP */
        .winner-week-card { display: flex; align-items: center; gap: 24px; flex-wrap: wrap; background: var(--surface); padding: 16px; border-radius: var(--radius-md); border: 1px solid var(--border-light); }
        .winner-week-thumb { width: 100px; height: 125px; border-radius: var(--radius-sm); overflow: hidden; }
        .winner-week-name { font-size: 1.4rem; font-weight: 700; color: var(--text-main); }
        .winner-week-date { font-size: 0.9rem; color: var(--text-muted); }
    </style>
</head>
<body>
    <main class="container">
        <header class="top-bar">
            <div class="button-group-top">
                <button class="whats-this-btn" id="infoButton" aria-label="What is this site?"><span>‚ú®</span> What's this?</button>
                <button class="ai-stock-btn" id="aiStockBtn" aria-label="View AI Stock Photos"><span>üñºÔ∏è</span> AI Stock Photos</button>
                <button class="share-site-btn" id="shareSiteBtn" aria-label="Share Site"><span>üöÄ</span> Share Site</button>
            </div>
            <div class="countdown-block">
                <span class="winner-note">üèÜ Winner in</span>
                <span class="countdown-number" id="countdownDisplay">00:00:00</span>
                <span style="font-size: 0.8rem; font-weight: bold; color: var(--text-muted);">UTC</span>
            </div>
        </header>

        <section class="value-prop">
            <span>Free Daily</span>
            High-quality AI wallpapers. Fresh batch every day ‚Äì vote for your favorite.
        </section>
        
        <div id="infoPopup" class="info-popup" role="dialog" aria-modal="true">
            <button class="close-popup" id="closePopup" aria-label="Close popup">&times;</button>
            <h3 style="font-size:1.8rem; margin-bottom: 10px;">Daily Cup</h3>
            <p style="font-size:1.1rem; font-weight: 600; color: var(--text-muted);">4 wallpapers. 1 winner. You decide.</p>
            <p style="margin: 20px 0; text-align: left; padding-left: 20px; line-height: 2;">
                ‚¨© Vote to show love<br>
                ‚¨© Download absolutely free<br>
                ‚¨© At midnight UTC, votes + downloads = WINNER<br>
                ‚¨© Fresh batch every day
            </p>
            <p style="background: var(--accent-subtle); padding: 16px; border-radius: var(--radius-sm); font-size: 0.95rem; text-align: left;">
                üëë <strong>Come back every day!</strong> Your vote shapes the gallery.
            </p>
        </div>
        
        <div id="aiStockPopup" class="info-popup" role="dialog" aria-modal="true">
            <button class="close-popup" id="closeAiStockPopup" aria-label="Close popup">&times;</button>
            <h3 style="font-size:1.5rem; margin-bottom: 10px;">AI Stock Photos</h3>
            <p style="font-size:0.95rem; margin-bottom: 20px; color: var(--text-muted);">All current wallpapers ‚Äì free to download.</p>
            <div id="aiGalleryContainer" class="ai-gallery-grid">
                </div>
        </div>
        
        <div class="daily-headline">
            <h2>Today's Selection</h2>
            <p>Vote & Download</p>
        </div>
        
        <section class="wallpaper-grid" id="wallGrid" aria-label="Today's Wallpaper Options"></section>
        
        <div class="puzzle-launch">
            <button class="puzzle-btn btn" id="openPuzzleBtn" aria-label="Play Puzzle Game">
                <span>üß©</span> Play Puzzle
            </button>
        </div>

        <article class="blog-section">
            <div class="blog-header">
                <h3>Best AI Wallpapers 2026</h3>
                <span>Editor's Pick</span>
            </div>
            <div class="blog-content">
                <p><strong>AI-generated wallpapers have never been this breathtaking.</strong> From hyper‚Äërealistic landscapes to abstract digital art, 2026 is the year AI art became indistinguishable from photography. At WallRank.club, we curate 4 fresh, hand‚Äëpicked AI wallpapers every single day ‚Äì and you decide the winner.</p>
                
                <div class="blog-highlight">
                    ‚ú® <strong>Why our daily cup?</strong> Each image is generated with cutting‚Äëedge models (Midjourney v7, DALL¬∑E 4, Stable Diffusion 5) and upscaled to 4K quality. We select only the most stunning, unique pieces that deserve your vote.
                </div>
                
                <p>üå∏ <strong>Misty forests, cosmic dust, neon waves, tropical blooms</strong> ‚Äì our collection spans every mood and color palette. And because you vote, the community shapes the gallery. The most loved wallpaper each day gets crowned and immortalized in our Hall of Fame.</p>
                
                <p>üìÖ <strong>New every midnight UTC.</strong> Whether you're a designer seeking inspiration, or just someone who loves beautiful art on your screen, WallRank.club delivers a daily dose of wonder. Download any wallpaper free, no signup, no catch.</p>
                
                <p>üéß <strong>Perfect for desktops, phones, and tablets.</strong> Use our "view only" feature to see how each wallpaper looks on a 3D phone, laptop, monitor, or tablet ‚Äì all built with pure CSS. It's the closest thing to holding the art in your hands.</p>
            </div>
            <div class="blog-footer">
                ‚Äî WallRank Editorial Team, Feb 2026
            </div>
        </article>

        <section class="winner-week-section" id="winnerWeekSection">
            <div class="winner-week-title">
                <h3>Winner of the Week</h3>
                <span class="winner-week-badge">Crowned</span>
            </div>
            <div id="winnerWeekContent" class="winner-week-card">
                </div>
        </section>

        <section class="winner-history-section">
            <div class="history-header">
                <h3>Past Winners</h3>
                <span>Hall of Fame</span>
            </div>
            <div id="winnersGrid" class="winners-grid"></div>
        </section>

        <div style="display: flex; justify-content: center; margin-top: 15px;">
            <span class="winner-note">üëë Golden border indicates current leader</span>
        </div>
        
        <footer class="footer-links">
            <a id="footerAbout" href="javascript:void(0)">About</a>
            <a id="footerPrivacy" href="javascript:void(0)">Privacy Policy</a>
            <a id="footerTerms" href="javascript:void(0)">Terms of Service</a>
            <a id="footerCookies" href="javascript:void(0)">Cookie Settings</a>
            <a id="footerAdChoices" href="javascript:void(0)">Ad Choices</a>
            <a id="footerContact" href="javascript:void(0)">Contact</a>
            <a id="footerHome" href="javascript:void(0)">Wallrank.club</a>
            <div class="copyright">
                ¬© 2026 WallRank.club. All rights reserved.<br>
                Protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.
            </div>
        </footer>
    </main>

    <div id="footerPopup" class="info-popup" role="dialog" aria-modal="true">
        <button class="close-popup" id="closeFooterPopup" aria-label="Close popup">&times;</button>
        <div id="footerPopupContent" style="text-align: left;"></div>
    </div>

    <div id="contactPopup" class="info-popup" role="dialog" aria-modal="true">
        <button class="close-popup" id="closeContactPopup" aria-label="Close popup">&times;</button>
        <h3 style="font-size:1.5rem; margin-bottom: 10px;">Contact</h3>
        <p style="font-size:1.1rem; background: var(--accent-subtle); padding: 16px; border-radius: var(--radius-sm); margin: 20px 0; word-break: break-all; border: 1px solid var(--border-light);">
            kabanijames9@gmail.com
        </p>
        <p style="color: var(--text-muted); font-size: 0.9rem;">For partnership, feedback, or just to say hi ‚Äì we'll reply within 24h.</p>
    </div>

    <div id="puzzleOverlay" class="puzzle-overlay">
        <div class="puzzle-card" id="puzzleCard">
            <div id="step1">
                <div class="puzzle-title">Choose an artwork</div>
                <div class="puzzle-selector" id="puzzleSelector"></div>
            </div>
            <div id="step2" style="display: none;">
                <div class="puzzle-title" id="selectedTitle" style="font-size: 1.2rem; color: var(--text-muted);">misty forest</div>
                <div id="puzzleGridContainer" class="puzzle-grid"></div>
                <button class="btn" id="shuffleBtn" style="margin: 20px auto 0;">üîÄ Shuffle</button>
            </div>
            <div id="step3" style="display: none;">
                <div class="celebration-8s" id="celebrationMessage">PERFECT!</div>
                <div id="afterCelebration" style="display: none; display: flex; gap: 12px; justify-content: center;">
                    <button class="btn" id="saveMemoryBtn">üì∏ Save Memory</button>
                    <button class="btn" id="tellOthersBtn">üì¢ Share</button>
                </div>
            </div>
            <div id="saveOptions" style="display: none;">
                <div style="font-size:1.2rem; margin: 15px 0; font-weight: bold;">Save as</div>
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button class="btn" id="saveWithNameBtn">üñãÔ∏è Add Name</button>
                    <button class="btn" id="saveSimpleBtn">‚¨áÔ∏è Download File</button>
                </div>
                <div id="nameInputArea" style="display: none; margin-top: 20px;">
                    <input type="text" id="userName" placeholder="Your Name" class="signature-input" aria-label="Your name">
                    <button class="btn" id="generateSignedWallpaper" style="margin: 0 auto;">Create</button>
                </div>
                <canvas id="signatureCanvas" style="display: none;"></canvas>
            </div>
            <div id="shareOptions" style="display: none;">
                <div style="font-size:1.2rem; margin-bottom: 20px; font-weight: bold;">Share link</div>
                <div style="background: var(--accent-subtle); padding: 12px; border-radius: var(--radius-sm); word-break: break-all; border: 1px solid var(--border-light); font-size: 0.9rem;">
                    <span id="shareLink">https://wallrank.club/puzzle/winner</span>
                </div>
                <div class="social-icons">
                    <div class="social-icon" data-share="fb">üìò</div>
                    <div class="social-icon" data-share="ig">üì∑</div>
                    <div class="social-icon" data-share="pin">üìå</div>
                    <div class="social-icon" data-share="tw">üê¶</div>
                    <div class="social-icon" data-share="snap">üëª</div>
                    <div class="social-icon" data-share="email">üìß</div>
                </div>
                <button class="btn" id="closeShareBtn" style="margin: 0 auto;">Back</button>
            </div>
            <button class="btn" id="closePuzzleBtn" style="margin: 25px auto 0; border: none; background: transparent; color: var(--text-muted); box-shadow: none;">‚úï Close</button>
        </div>
    </div>

    <div id="devicesOverlay" class="devices-overlay">
        <div class="devices-container">
            <div class="devices-title">Preview</div>
            <div class="carousel">
                <div class="carousel-btn carousel-prev" id="carouselPrev" aria-label="Previous Device">‚Äπ</div>
                <div class="carousel-btn carousel-next" id="carouselNext" aria-label="Next Device">‚Ä∫</div>
                
                <div class="carousel-slide" id="slidePhone">
                    <div class="device-wrapper">
                        <div class="device-phone">
                            <div class="side-button volume-up"></div>
                            <div class="side-button volume-down"></div>
                            <div class="side-button power"></div>
                            <div class="phone-screen">
                                <div class="phone-notch">
                                    <div class="phone-camera"></div>
                                    <div class="phone-speaker"></div>
                                    <div class="phone-camera"></div>
                                </div>
                                <img id="devicePhoneImg" class="device-wallpaper" src="" alt="wallpaper on phone" loading="lazy">
                                <div class="phone-home-bar"></div>
                            </div>
                        </div>
                        <span class="device-label">Phone</span>
                    </div>
                </div>
                
                <div class="carousel-slide" id="slideLaptop">
                    <div class="device-wrapper">
                        <div class="device-laptop">
                            <div class="laptop-body">
                                <div class="laptop-bezel">
                                    <div class="laptop-screen">
                                        <img id="deviceLaptopImg" class="device-wallpaper" src="" alt="wallpaper on laptop" loading="lazy">
                                    </div>
                                </div>
                            </div>
                            <div class="laptop-base"></div>
                        </div>
                        <span class="device-label">Laptop</span>
                    </div>
                </div>
                
                <div class="carousel-slide" id="slideMonitor">
                    <div class="device-wrapper">
                        <div class="device-monitor">
                            <div class="monitor-body">
                                <div class="monitor-bezel">
                                    <div class="monitor-screen">
                                        <img id="deviceMonitorImg" class="device-wallpaper" src="" alt="wallpaper on monitor" loading="lazy">
                                    </div>
                                </div>
                            </div>
                            <div class="monitor-stand"></div>
                            <div class="monitor-base"></div>
                        </div>
                        <span class="device-label">Monitor</span>
                    </div>
                </div>
                
                <div class="carousel-slide" id="slideTablet">
                    <div class="device-wrapper">
                        <div class="device-tablet">
                            <div class="tablet-bezel">
                                <div class="tablet-screen">
                                    <img id="deviceTabletImg" class="device-wallpaper" src="" alt="wallpaper on tablet" loading="lazy">
                                    <div class="tablet-home-bar"></div>
                                </div>
                            </div>
                        </div>
                        <span class="device-label">Tablet</span>
                    </div>
                </div>
            </div>
            
            <div class="dots" id="carouselDots">
                <div class="dot active" data-index="0" aria-label="Go to slide 1"></div>
                <div class="dot" data-index="1" aria-label="Go to slide 2"></div>
                <div class="dot" data-index="2" aria-label="Go to slide 3"></div>
                <div class="dot" data-index="3" aria-label="Go to slide 4"></div>
            </div>
            
            <button class="btn" id="closeDevicesBtn" style="margin: 30px auto 0; background: var(--text-main); color: white;">‚úï Close Preview</button>
        </div>
    </div>

    <div class="seo-hidden">daily wallpaper vote puzzle 4K free AI winner every midnight UTC+0 wallrank.club best ranking wallpaper puzzle 4 devices carousel daily reset hall of fame</div>

    <script>
        (function() {
            'use strict';
            
            // ========== ORIGINAL SCRIPT LOGIC (UNTOUCHED) ==========
            const wallpapers = [
                { id: 1, title: "üèîÔ∏è mountain peak", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/1.png", votes: 0, downloads: 0 },
                { id: 2, title: "üåä ocean wave", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/2.png", votes: 0, downloads: 0 },
                { id: 3, title: "üå≤ forest path", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/3.png", votes: 0, downloads: 0 },
                { id: 4, title: "üå∏ cherry bloom", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/4.png", votes: 0, downloads: 0 }
            ];
            
            const tomorrowWallpapers = [
                { id: 1, title: "üèîÔ∏è mountain peak", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/1.png", votes: 0, downloads: 0 },
                { id: 2, title: "üåä ocean wave", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/2.png", votes: 0, downloads: 0 },
                { id: 3, title: "üå≤ forest path", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/3.png", votes: 0, downloads: 0 },
                { id: 4, title: "üå∏ cherry bloom", filename: "https://raw.githubusercontent.com/amine4buss-code/wallpaper-vote/main/4.png", votes: 0, downloads: 0 }
            ];
            
            let pastWinners = [];
            const PAST_WINNERS_KEY = 'wallrank_past_winners';
            localStorage.removeItem(PAST_WINNERS_KEY);
            
            function loadPastWinners() { pastWinners = []; }
            function savePastWinners() { localStorage.setItem(PAST_WINNERS_KEY, JSON.stringify(pastWinners)); }
            function addWinnerToHistory(winnerId, date) {
                const wp = wallpapers.find(w => w.id === winnerId);
                if (!wp) return;
                const winnerEntry = { id: winnerId, title: wp.title, filename: wp.filename, votes: wp.votes, downloads: wp.downloads, date: date || new Date().toISOString().split('T')[0] };
                pastWinners.unshift(winnerEntry);
                savePastWinners();
                renderWinnersHistory();
            }
            function renderWinnersHistory() {
                const grid = document.getElementById('winnersGrid');
                if (!grid) return;
                if (pastWinners.length === 0) {
                    grid.innerHTML = '<div class="empty-history">No past winners yet. Be the first to vote!</div>';
                    return;
                }
                let html = '';
                pastWinners.forEach(winner => {
                    html += `<div class="winner-item"><div class="winner-thumb"><img src="${winner.filename}" alt="${winner.title}" loading="lazy"></div><div class="winner-title">${winner.title}</div><div class="winner-date">${winner.date}</div></div>`;
                });
                grid.innerHTML = html;
            }
            
            function getTodayKey() { const d = new Date(); return `${d.getUTCFullYear()}-${d.getUTCMonth()}-${d.getUTCDate()}`; }
            const todayKey = getTodayKey(); let userVoteRecord = {};
            function loadVoteRecord() { const stored = localStorage.getItem(`voteRecord_${todayKey}`); if (stored) { try { userVoteRecord = JSON.parse(stored) || {}; } catch(e) { userVoteRecord = {}; } } else { userVoteRecord = {}; } }
            function saveVoteRecord() { localStorage.setItem(`voteRecord_${todayKey}`, JSON.stringify(userVoteRecord)); }
            loadVoteRecord();
            
            wallpapers.forEach(w => { let saved = localStorage.getItem(`dailyWall_${w.id}_${todayKey}`); if (saved) { try { saved = JSON.parse(saved); w.votes = saved.votes || 0; w.downloads = saved.downloads || 0; } catch(e) {} } });
            
            const grid = document.getElementById('wallGrid');
            let votingActive = true;
            let winnerId = null;
            let celebration10minTimer = null;
            
            function renderCards() {
                grid.innerHTML = '';
                wallpapers.forEach((wp, index) => {
                    const card = document.createElement('div'); card.className = 'wall-card'; card.dataset.id = wp.id;
                    let imgHTML = `<div class="img-container"><img src="${wp.filename}" alt="${wp.title}" loading="lazy"></div>`;
                    let stats = `<div class="stats"><span>‚ù§Ô∏è ${wp.votes}</span><span>‚¨áÔ∏è ${wp.downloads}</span></div>`;
                    let buttons = '';
                    if (votingActive) {
                        buttons = `<div class="button-group">
                            <button class="btn btn-vote" data-action="vote" data-id="${wp.id}">Vote</button>
                            <button class="btn btn-download" data-action="download" data-id="${wp.id}">Get</button>
                            <button class="btn btn-devices" data-action="devices" data-id="${wp.id}">Preview</button>
                        </div>`;
                    } else {
                        if (wp.id === winnerId) {
                            buttons = `<div class="button-group">
                                <button class="btn btn-download" data-action="download" data-id="${wp.id}">Get</button>
                                <button class="btn btn-devices" data-action="devices" data-id="${wp.id}">Preview</button>
                            </div>`;
                            card.classList.add('leader-gold');
                        } else {
                            imgHTML = `<div class="img-container" style="background: var(--accent-subtle); display: flex; align-items: center; justify-content: center;"><span style="font-size: 1rem; color: var(--text-muted); font-weight: 600;">Voting ended</span></div>`;
                            stats = `<div class="stats"><span>‚ù§Ô∏è ${wp.votes}</span><span>‚¨áÔ∏è ${wp.downloads}</span></div>`;
                            buttons = `<div class="button-group"><button class="btn btn-devices" data-action="devices" data-id="${wp.id}">Preview</button></div>`;
                        }
                    }
                    card.innerHTML = imgHTML + `<div class="card-content"><div class="wall-title">${wp.title}</div>${stats}${buttons}</div>`;
                    grid.appendChild(card);
                });
                if (votingActive) updateGoldenLeader();
            }
            
            function calculateLeaderId() { let leaderId = null; let maxScore = -1; wallpapers.forEach(w => { const score = w.votes + w.downloads; if (score > maxScore) { maxScore = score; leaderId = w.id; } }); return leaderId; }
            function updateGoldenLeader() { 
                document.querySelectorAll('.wall-card').forEach(c => c.classList.remove('leader-gold')); 
                const leaderId = calculateLeaderId(); 
                if (leaderId !== null && votingActive) { 
                    const leaderCard = document.querySelector(`.wall-card[data-id="${leaderId}"]`); 
                    if (leaderCard) leaderCard.classList.add('leader-gold'); 
                } 
            }
            
            function createReaction(x, y, emoji = '‚ù§Ô∏è') {
                const reaction = document.createElement('div');
                reaction.className = 'reaction-emoji';
                reaction.textContent = emoji;
                reaction.style.left = (x - 30) + 'px';
                reaction.style.top = (y - 40) + 'px';
                document.body.appendChild(reaction);
                setTimeout(() => reaction.remove(), 1000);
            }

            function addConfetti() {
                for (let i = 0; i < 30; i++) {
                    const conf = document.createElement('div');
                    conf.className = 'confetti';
                    conf.style.left = Math.random() * 100 + '%';
                    conf.style.animationDelay = Math.random() * 2 + 's';
                    conf.style.background = `hsl(${Math.random() * 360}, 10%, 80%)`; /* Muted confetti for clean look */
                    conf.style.width = Math.random() * 8 + 4 + 'px';
                    conf.style.height = conf.style.width;
                    const el = document.querySelector('.celebration-8s');
                    if (el) { el.appendChild(conf); setTimeout(() => conf.remove(), 2000); }
                }
            }
            
            function handleVote(id, event) {
                if (!votingActive) return;
                const wp = wallpapers.find(w => w.id === id); if (!wp) return;
                if (userVoteRecord[id] === true) {
                    const btn = document.querySelector(`.wall-card[data-id="${id}"] .btn-vote`);
                    if (btn) { btn.classList.add('clicked'); btn.innerHTML = 'Voted'; setTimeout(() => { btn.classList.remove('clicked'); btn.innerHTML = 'Vote'; }, 1200); }
                    return;
                }
                wp.votes += 1; localStorage.setItem(`dailyWall_${id}_${todayKey}`, JSON.stringify({ votes: wp.votes, downloads: wp.downloads }));
                userVoteRecord[id] = true; saveVoteRecord();
                const card = document.querySelector(`.wall-card[data-id="${id}"]`);
                if (card) { const statsSpan = card.querySelector('.stats'); if (statsSpan) statsSpan.innerHTML = `<span>‚ù§Ô∏è ${wp.votes}</span><span>‚¨áÔ∏è ${wp.downloads}</span>`;
                const btn = card.querySelector('.btn-vote'); if (btn) { btn.classList.add('clicked'); btn.innerHTML = 'Voted!'; setTimeout(() => { btn.classList.remove('clicked'); btn.innerHTML = 'Vote'; }, 1000); } }
                gtag('event', 'vote_cast', { 'event_category': 'engagement', 'event_label': wp.title, 'value': wp.votes });
                if (event) { createReaction(event.clientX, event.clientY, '‚ú®'); }
                updateGoldenLeader();
            }
            
            function handleDownload(id, event) {
                const wp = wallpapers.find(w => w.id === id); if (!wp) return;
                wp.downloads += 1; localStorage.setItem(`dailyWall_${id}_${todayKey}`, JSON.stringify({ votes: wp.votes, downloads: wp.downloads }));
                const card = document.querySelector(`.wall-card[data-id="${id}"]`);
                if (card) { const statsSpan = card.querySelector('.stats'); if (statsSpan) statsSpan.innerHTML = `<span>‚ù§Ô∏è ${wp.votes}</span><span>‚¨áÔ∏è ${wp.downloads}</span>`;
                const btn = card.querySelector('.btn-download'); if (btn) { btn.classList.add('clicked'); btn.innerHTML = 'Saved'; setTimeout(() => { btn.classList.remove('clicked'); btn.innerHTML = 'Get'; }, 1200); } }
                const link = document.createElement('a'); link.href = wp.filename; link.target = '_blank'; link.rel = 'noopener'; link.click();
                gtag('event', 'download_wall', { 'event_category': 'download', 'event_label': wp.title });
                if (event) { createReaction(event.clientX, event.clientY, '‚¨áÔ∏è'); }
                updateGoldenLeader();
            }
            
            // CAROUSEL
            const devicesOverlay = document.getElementById('devicesOverlay');
            const devicePhoneImg = document.getElementById('devicePhoneImg');
            const deviceLaptopImg = document.getElementById('deviceLaptopImg');
            const deviceMonitorImg = document.getElementById('deviceMonitorImg');
            const deviceTabletImg = document.getElementById('deviceTabletImg');
            const closeDevicesBtn = document.getElementById('closeDevicesBtn');
            const slides = [
                document.getElementById('slidePhone'),
                document.getElementById('slideLaptop'),
                document.getElementById('slideMonitor'),
                document.getElementById('slideTablet')
            ];
            const dots = document.querySelectorAll('.dot');
            const prevBtn = document.getElementById('carouselPrev');
            const nextBtn = document.getElementById('carouselNext');
            let currentSlide = 0;
            
            function showSlide(index) {
                slides.forEach((s, i) => s.classList.toggle('active', i === index));
                dots.forEach((d, i) => d.classList.toggle('active', i === index));
                currentSlide = index;
            }
            
            prevBtn.addEventListener('click', () => showSlide((currentSlide - 1 + slides.length) % slides.length));
            nextBtn.addEventListener('click', () => showSlide((currentSlide + 1) % slides.length));
            dots.forEach((dot, i) => dot.addEventListener('click', () => showSlide(i)));
            
            function handleDevices(id, event) {
                const wp = wallpapers.find(w => w.id === id);
                if (!wp) return;
                devicePhoneImg.src = wp.filename;
                deviceLaptopImg.src = wp.filename;
                deviceMonitorImg.src = wp.filename;
                deviceTabletImg.src = wp.filename;
                devicesOverlay.classList.add('active');
                showSlide(0);
                gtag('event', 'view_on_devices', { 'event_category': 'engagement', 'event_label': wp.title });
            }
            
            closeDevicesBtn.addEventListener('click', () => devicesOverlay.classList.remove('active'));
            devicesOverlay.addEventListener('click', (e) => { if (e.target === devicesOverlay) devicesOverlay.classList.remove('active'); });
            
            // MIDNIGHT
            function checkMidnightAndWinner() {
                const now = new Date();
                const utcHours = now.getUTCHours();
                const utcMinutes = now.getUTCMinutes();
                const utcSeconds = now.getUTCSeconds();
                if (utcHours === 0 && utcMinutes === 0 && utcSeconds === 0 && votingActive) {
                    votingActive = false;
                    winnerId = calculateLeaderId();
                    renderCards();
                    
                    if (celebration10minTimer) clearTimeout(celebration10minTimer);
                    celebration10minTimer = setTimeout(() => {
                        if (winnerId) {
                            const todayDate = new Date();
                            todayDate.setDate(todayDate.getDate() - 1);
                            const dateStr = todayDate.toISOString().split('T')[0];
                            addWinnerToHistory(winnerId, dateStr);
                        }
                        for (let i = 0; i < wallpapers.length; i++) {
                            wallpapers[i].filename = tomorrowWallpapers[i].filename;
                            wallpapers[i].title = tomorrowWallpapers[i].title;
                            wallpapers[i].votes = 0;
                            wallpapers[i].downloads = 0;
                            const newTodayKey = getTodayKey();
                            localStorage.removeItem(`dailyWall_${wallpapers[i].id}_${newTodayKey}`);
                        }
                        votingActive = true;
                        winnerId = null;
                        userVoteRecord = {};
                        saveVoteRecord();
                        renderCards();
                    }, 600000);
                }
            }
            setInterval(checkMidnightAndWinner, 1000);
            
            document.addEventListener('click', function(e) {
                const btn = e.target.closest('.btn');
                if (!btn) return;
                const action = btn.dataset.action;
                const id = btn.dataset.id ? parseInt(btn.dataset.id) : null;
                if (!id) return;
                if (action === 'vote') { e.preventDefault(); handleVote(id, e); }
                else if (action === 'download') { e.preventDefault(); handleDownload(id, e); }
                else if (action === 'devices') { e.preventDefault(); handleDevices(id, e); }
            });
            
            function updateCountdown() {
                const now = new Date(); 
                const utcNow = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds()));
                const nextMidnight = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() + 1, 0, 0, 0));
                const diff = nextMidnight - utcNow;
                if (diff <= 0) { document.getElementById('countdownDisplay').innerText = '00:00:00'; return; }
                const hours = Math.floor(diff / 1000 / 60 / 60); 
                const minutes = Math.floor((diff / 1000 / 60) % 60); 
                const seconds = Math.floor((diff / 1000) % 60);
                document.getElementById('countdownDisplay').innerText = `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
            }
            updateCountdown(); setInterval(updateCountdown,1000);
            
            const infoBtn = document.getElementById('infoButton'); const popup = document.getElementById('infoPopup'); const closePopup = document.getElementById('closePopup');
            infoBtn.addEventListener('click',function(e){ popup.classList.add('show'); gtag('event','info_click',{'event_category':'engagement'}); });
            closePopup.addEventListener('click',function(e){ popup.classList.remove('show'); });
            window.addEventListener('click',function(e){ if(e.target===popup) popup.classList.remove('show'); });
            gtag('event','page_view',{'page_title':'Daily Wallpaper Cup','page_location':'https://wallrank.club','send_to':'G-19RP0D764T'});
            setTimeout(()=>updateGoldenLeader(),50);
            
            // PUZZLE
            const overlay = document.getElementById('puzzleOverlay');
            const puzzleBtn = document.getElementById('openPuzzleBtn');
            const closePuzzleBtn = document.getElementById('closePuzzleBtn');
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            const step3 = document.getElementById('step3');
            const puzzleSelector = document.getElementById('puzzleSelector');
            const puzzleGridContainer = document.getElementById('puzzleGridContainer');
            const selectedTitle = document.getElementById('selectedTitle');
            const shuffleBtn = document.getElementById('shuffleBtn');
            const celebrationMsg = document.getElementById('celebrationMessage');
            const afterCelebration = document.getElementById('afterCelebration');
            const saveMemoryBtn = document.getElementById('saveMemoryBtn');
            const tellOthersBtn = document.getElementById('tellOthersBtn');
            const saveOptions = document.getElementById('saveOptions');
            const shareOptions = document.getElementById('shareOptions');
            const saveWithNameBtn = document.getElementById('saveWithNameBtn');
            const saveSimpleBtn = document.getElementById('saveSimpleBtn');
            const nameInputArea = document.getElementById('nameInputArea');
            const userName = document.getElementById('userName');
            const generateSigned = document.getElementById('generateSignedWallpaper');
            const closeShareBtn = document.getElementById('closeShareBtn');
            const shareLink = document.getElementById('shareLink');
            
            let selectedWallpaper = null;
            let currentOrder = [];
            let puzzleSolved = false;
            let celebrationTimer;

            function initPuzzleSelector() {
                puzzleSelector.innerHTML = '';
                wallpapers.forEach(wp => {
                    const thumb = document.createElement('div');
                    thumb.className = 'puzzle-thumb';
                    thumb.dataset.id = wp.id;
                    thumb.innerHTML = `<img src="${wp.filename}" alt="${wp.title}">`;
                    thumb.addEventListener('click', (e) => {
                        selectedWallpaper = wp;
                        selectedTitle.innerText = wp.title;
                        step1.style.display = 'none';
                        step2.style.display = 'block';
                        step3.style.display = 'none';
                        saveOptions.style.display = 'none';
                        shareOptions.style.display = 'none';
                        initPuzzle(wp);
                    });
                    puzzleSelector.appendChild(thumb);
                });
            }
            
            function initPuzzle(wp) {
                puzzleSolved = false;
                clearTimeout(celebrationTimer);
                afterCelebration.style.display = 'none';
                closePuzzleBtn.style.display = 'inline-block';
                currentOrder = shuffleArray([0,1,2,3,4,5,6,7,8]);
                renderPuzzleGrid(wp);
            }
            
            function shuffleArray(arr) {
                for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [arr[i], arr[j]] = [arr[j], arr[i]]; }
                return arr;
            }
            
            function renderPuzzleGrid(wp) {
                puzzleGridContainer.innerHTML = '';
                for (let i = 0; i < 9; i++) {
                    const piece = document.createElement('div');
                    piece.className = 'puzzle-piece';
                    piece.draggable = true;
                    piece.dataset.pieceIndex = i;
                    const pieceId = currentOrder[i];
                    const row = Math.floor(pieceId / 3);
                    const col = pieceId % 3;
                    piece.style.backgroundImage = `url('${wp.filename}')`;
                    piece.style.backgroundPosition = `-${col * 120}px -${row * 120}px`;
                    piece.addEventListener('dragstart', (e) => e.dataTransfer.setData('text/plain', e.target.dataset.pieceIndex));
                    piece.addEventListener('dragover', (e) => e.preventDefault());
                    piece.addEventListener('drop', (e) => {
                        e.preventDefault();
                        const fromIdx = parseInt(e.dataTransfer.getData('text/plain'));
                        const toIdx = parseInt(e.target.dataset.pieceIndex);
                        if (fromIdx === toIdx) return;
                        [currentOrder[fromIdx], currentOrder[toIdx]] = [currentOrder[toIdx], currentOrder[fromIdx]];
                        renderPuzzleGrid(wp);
                        checkVictory(wp);
                    });
                    puzzleGridContainer.appendChild(piece);
                }
            }
            
            function checkVictory(wp) {
                let win = true;
                for (let i = 0; i < 9; i++) if (currentOrder[i] !== i) { win = false; break; }
                if (win && !puzzleSolved) {
                    puzzleSolved = true;
                    step2.style.display = 'none';
                    step3.style.display = 'block';
                    celebrationMsg.innerText = 'PERFECT!';
                    afterCelebration.style.display = 'none';
                    closePuzzleBtn.style.display = 'none';
                    addConfetti();
                    celebrationTimer = setTimeout(() => {
                        afterCelebration.style.display = 'flex';
                        closePuzzleBtn.style.display = 'inline-block';
                    }, 3000);
                }
            }
            
            shuffleBtn.addEventListener('click', (e) => { if (selectedWallpaper) { currentOrder = shuffleArray([0,1,2,3,4,5,6,7,8]); renderPuzzleGrid(selectedWallpaper); } });
            puzzleBtn.addEventListener('click', (e) => { overlay.classList.add('active'); step1.style.display = 'block'; step2.style.display = 'none'; step3.style.display = 'none'; saveOptions.style.display = 'none'; shareOptions.style.display = 'none'; initPuzzleSelector(); });
            closePuzzleBtn.addEventListener('click', (e) => { overlay.classList.remove('active'); clearTimeout(celebrationTimer); });
            saveMemoryBtn.addEventListener('click', (e) => { step3.style.display = 'none'; saveOptions.style.display = 'block'; });
            tellOthersBtn.addEventListener('click', (e) => { step3.style.display = 'none'; shareOptions.style.display = 'block'; shareLink.innerText = `https://wallrank.club/puzzle/${selectedWallpaper?.id || 'daily'}?win=1`; });
            saveSimpleBtn.addEventListener('click', (e) => { const link = document.createElement('a'); link.href = selectedWallpaper.filename; link.download = `wallrank-${selectedWallpaper.title.replace(/[^a-z0-9]/gi,'-')}.jpg`; link.click(); saveOptions.style.display = 'none'; step1.style.display = 'block'; });
            saveWithNameBtn.addEventListener('click', (e) => { nameInputArea.style.display = 'block'; });
            generateSigned.addEventListener('click', (e) => {
                const name = userName.value.trim() || 'master';
                const canvas = document.getElementById('signatureCanvas');
                canvas.width = 600; canvas.height = 480;
                const ctx = canvas.getContext('2d');
                const img = new Image(); img.crossOrigin = 'anonymous'; img.src = selectedWallpaper.filename;
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, 600, 480);
                    ctx.font = 'bold 36px Quicksand, sans-serif'; ctx.fillStyle = 'white'; ctx.shadowColor = 'black'; ctx.shadowBlur = 12;
                    ctx.fillText(`SOLVED BY ${name}`, 50, 420);
                    const link = document.createElement('a'); link.download = `solved-by-${name}.png`; link.href = canvas.toDataURL('image/png'); link.click();
                    nameInputArea.style.display = 'none'; saveOptions.style.display = 'none'; step1.style.display = 'block'; userName.value = '';
                };
            });
            
            document.querySelectorAll('.social-icon').forEach(icon => {
                icon.addEventListener('click', (e) => {
                    const platform = e.currentTarget.dataset.share;
                    const url = encodeURIComponent(shareLink.innerText);
                    let shareUrl = '';
                    if (platform === 'fb') { shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`; }
                    else if (platform === 'tw') { shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=I solved the wallpaper puzzle!`; }
                    else if (platform === 'pin') { shareUrl = `https://pinterest.com/pin/create/button/?url=${url}`; }
                    else if (platform === 'ig') { alert('Share on Instagram ‚Äì take a screenshot!'); return; }
                    else if (platform === 'snap') { alert('Snapchat ‚Äì screenshot & share!'); return; }
                    else if (platform === 'email') { shareUrl = `mailto:?subject=Wallpaper puzzle&body=${url}`; }
                    if (shareUrl) window.open(shareUrl, '_blank');
                    gtag('event', 'share_puzzle', { 'event_category': 'social', 'event_label': platform });
                });
            });
            
            closeShareBtn.addEventListener('click', (e) => { shareOptions.style.display = 'none'; step1.style.display = 'block'; });
            
            // WEB SHARE API
            const shareSiteBtn = document.getElementById('shareSiteBtn');
            if(shareSiteBtn) {
                shareSiteBtn.addEventListener('click', async (e) => {
                    if (navigator.share) {
                        try { await navigator.share({ title: 'WallRank.club', text: 'Check out the daily AI wallpaper cup!', url: 'https://wallrank.club' }); } 
                        catch(err) { console.log('Share canceled', err); }
                    } else {
                        navigator.clipboard.writeText('https://wallrank.club');
                        alert('Link copied to clipboard!');
                    }
                    gtag('event', 'share_site', { 'event_category': 'growth', 'event_label': 'top_bar_share' });
                });
            }

            // FOOTER LINKS
            const footerPopup = document.getElementById('footerPopup');
            const footerPopupContent = document.getElementById('footerPopupContent');
            const closeFooterPopup = document.getElementById('closeFooterPopup');
            
            function showFooterPopup(title, content) {
                footerPopupContent.innerHTML = content;
                footerPopup.classList.add('show');
            }
            
            document.getElementById('footerAbout').addEventListener('click', (e) => {
                showFooterPopup('About', `
                    <h3 style="font-size:1.5rem; margin-bottom: 10px;">WallRank.club</h3>
                    <p style="font-size:1rem; margin: 16px 0; color: var(--text-muted);">We curate high-quality AI art into a daily competition.</p>
                `);
            });
            
            document.getElementById('footerPrivacy').addEventListener('click', (e) => {
                showFooterPopup('Privacy Policy', `
                    <h3 style="font-size:1.5rem; margin-bottom: 10px;">Privacy Policy</h3>
                    <p style="font-size:0.95rem; margin: 16px 0; color: var(--text-muted); text-align: left;">We store votes locally to prevent duplicates. We use basic Google Analytics. No personal data is sold.</p>
                `);
            });
            
            document.getElementById('footerTerms').addEventListener('click', (e) => {
                showFooterPopup('Terms of Service', `
                    <h3 style="font-size:1.5rem; margin-bottom: 10px;">Terms of Service</h3>
                    <p style="font-size:0.95rem; margin: 16px 0; color: var(--text-muted); text-align: left;">Vote fairly. Wallpapers are free for personal use.</p>
                `);
            });
            
            document.getElementById('footerCookies').addEventListener('click', (e) => {
                showFooterPopup('Cookie Settings', `
                    <h3 style="font-size:1.5rem; margin-bottom: 10px;">Cookies</h3>
                    <p style="font-size:0.95rem; margin: 16px 0; color: var(--text-muted); text-align: left;">We use local storage for voting logic and first-party cookies for Analytics. No tracking ads.</p>
                `);
            });
            
            document.getElementById('footerAdChoices').addEventListener('click', (e) => {
                showFooterPopup('Ad Choices', `
                    <h3 style="font-size:1.5rem; margin-bottom: 10px;">Ad Choices</h3>
                    <p style="font-size:0.95rem; margin: 16px 0; color: var(--text-muted); text-align: left;">WallRank is currently ad-free.</p>
                `);
            });
            
            document.getElementById('footerHome').addEventListener('click', (e) => {
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
            
            const contactPopup = document.getElementById('contactPopup');
            const closeContactPopup = document.getElementById('closeContactPopup');
            document.getElementById('footerContact').addEventListener('click', (e) => {
                contactPopup.classList.add('show');
            });
            closeContactPopup.addEventListener('click', () => contactPopup.classList.remove('show'));
            window.addEventListener('click', (e) => { if (e.target === contactPopup) contactPopup.classList.remove('show'); });
            
            closeFooterPopup.addEventListener('click', () => footerPopup.classList.remove('show'));
            window.addEventListener('click', (e) => { if (e.target === footerPopup) footerPopup.classList.remove('show'); });
            
            // AI STOCK PHOTOS POPUP
            const aiStockBtn = document.getElementById('aiStockBtn');
            const aiStockPopup = document.getElementById('aiStockPopup');
            const closeAiStock = document.getElementById('closeAiStockPopup');
            const aiGalleryContainer = document.getElementById('aiGalleryContainer');
            
            function renderAiGallery() {
                if (!aiGalleryContainer) return;
                let html = '';
                wallpapers.forEach(wp => {
                    html += `
                        <div class="ai-gallery-item">
                            <img src="${wp.filename}" alt="${wp.title}" loading="lazy">
                            <div class="ai-gallery-title">${wp.title}</div>
                            <div style="margin-top: 8px;">
                                <button class="btn" style="padding: 6px 12px; font-size: 0.8rem; min-height: auto;" onclick="document.querySelector('.btn-download[data-id=\\'${wp.id}\\']')?.click()">Download</button>
                            </div>
                        </div>
                    `;
                });
                aiGalleryContainer.innerHTML = html;
            }
            
            aiStockBtn.addEventListener('click', function(e) {
                renderAiGallery();
                aiStockPopup.classList.add('show');
            });
            closeAiStock.addEventListener('click', function() {
                aiStockPopup.classList.remove('show');
            });
            window.addEventListener('click', function(e) {
                if (e.target === aiStockPopup) aiStockPopup.classList.remove('show');
            });
            
            // INIT
            loadPastWinners();
            renderWinnersHistory();
            renderCards();
            renderAiGallery();
            
            // Sample data
            setTimeout(() => {
                const winnerContent = document.getElementById('winnerWeekContent');
                if (winnerContent && pastWinners.length === 0) {
                    winnerContent.innerHTML = `
                        <div class="winner-week-thumb">
                            <img src="${wallpapers[0].filename}" alt="${wallpapers[0].title}">
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px;">
                            <div class="winner-week-name">${wallpapers[0].title}</div>
                            <div class="winner-week-date">Crowned ${new Date().toISOString().split('T')[0]}</div>
                        </div>
                    `;
                }
            }, 100);
        })();
    </script>
</body>
</html>
